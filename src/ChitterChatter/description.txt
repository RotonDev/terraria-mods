bunch of chat improvements and stuff
